<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WahlKompass Moosburg</title>
  <meta name="description" content="Kommunalwahl Moosburg â€“ Finde heraus, welche Partei deinen Ansichten am nÃ¤chsten steht." />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body, #root { min-height: 100vh; background: #F5F2EB; }
    @keyframes fadeUp   { from { opacity:0; transform:translateY(18px); } to { opacity:1; transform:translateY(0); } }
    @keyframes fadeIn   { from { opacity:0; } to { opacity:1; } }
    @keyframes barGrow  { from { width:0; } to {} }
    @keyframes scaleIn  { from { opacity:0; transform:scale(0.95); } to { opacity:1; transform:scale(1); } }
    @keyframes expandIn { from { opacity:0; transform:translateY(-6px); } to { opacity:1; transform:translateY(0); } }
    .fu  { animation: fadeUp 0.55s ease both; }
    .fu1 { animation-delay: 0.08s; } .fu2 { animation-delay: 0.20s; }
    .fu3 { animation-delay: 0.33s; } .fu4 { animation-delay: 0.46s; }
    .fu5 { animation-delay: 0.58s; }
    .btn-primary { transition: background 0.18s, transform 0.15s, box-shadow 0.18s; }
    .btn-primary:hover { background: #8B0D17 !important; transform: translateY(-2px); box-shadow: 0 8px 24px rgba(140,13,23,0.3) !important; }
    .btn-primary:active { transform: translateY(0) !important; }
    .btn-ghost { transition: background 0.15s; }
    .btn-ghost:hover { background: #E2DDD4 !important; }
    .btn-answer { transition: transform 0.12s, box-shadow 0.12s; cursor: pointer; }
    .btn-answer:hover { transform: translateY(-3px) !important; }
    .btn-answer:active { transform: translateY(0) !important; }
    .gewicht-item { transition: background 0.15s, border-color 0.15s; cursor: pointer; }
    .gewicht-item:hover { background: #F0EDE4 !important; }
    .ergebnis-karte { animation: fadeUp 0.45s ease both; }
    .karte-header { cursor: pointer; user-select: none; transition: background 0.15s; }
    .karte-header:hover { background: #FAFAF7 !important; }
    .bar-fill { animation: barGrow 1s cubic-bezier(.22,.68,0,1.2) both; }
    .overlay { animation: fadeIn 0.2s ease; }
    .popup-modal { animation: scaleIn 0.25s ease; }
    .expand-panel { animation: expandIn 0.25s ease both; }
    .detail-row:not(:last-child) { border-bottom: 1px solid #EDE9DF; }
    ::-webkit-scrollbar { width: 5px; }
    ::-webkit-scrollbar-track { background: #EDE9DF; border-radius: 99px; }
    ::-webkit-scrollbar-thumb { background: #C8B89A; border-radius: 99px; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo, useCallback } = React;

    // â”€â”€â”€ FRAGEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    const FRAGEN = [
      { id:"q1",  kategorie:"Verkehr & MobilitÃ¤t",           text:"Soll die Stadt Moosburg in der Innenstadt verkehrsberuhigte Bereiche schaffen?" },
      { id:"q2",  kategorie:"Verkehr & MobilitÃ¤t",           text:"Soll am Schulzentrum SÃ¼d eine Einweg-Regelung eingefÃ¼hrt werden?" },
      { id:"q3",  kategorie:"Verkehr & MobilitÃ¤t",           text:"Sollen in Moosburg weitere Tempo-30-Zonen ausgewiesen werden?" },
      { id:"q4",  kategorie:"Verkehr & MobilitÃ¤t",           text:"Soll die Stadt Moosburg ein digitales Parkraummanagement einfÃ¼hren?" },
      { id:"q5",  kategorie:"Verkehr & MobilitÃ¤t",           text:"Soll die Stadt Moosburg ein innenstadtnahes Parkhaus bauen?" },
      { id:"q6",  kategorie:"Verkehr & MobilitÃ¤t",           text:"Soll die Stadt Moosburg die Kosten fÃ¼r Parktickets in der Innenstadt erhÃ¶hen, um mehr finanziellen Spielraum zu haben?" },
      { id:"q7",  kategorie:"Verkehr & MobilitÃ¤t",           text:"Soll die Stadt Moosburg weitere MaÃŸnahmen ergreifen, um den Verkehr in der Innenstadt zu reduzieren?" },
      { id:"q8",  kategorie:"Verkehr & MobilitÃ¤t",           text:"Soll die Stadt Moosburg sich fÃ¼r einen Nachtverkehr an Wochenenden und vor Feiertagen einsetzen?" },
      { id:"q9",  kategorie:"Digitalisierung & Transparenz", text:"Soll die Stadt Moosburg Videotermine fÃ¼r BehÃ¶rdengÃ¤nge ermÃ¶glichen?" },
      { id:"q10", kategorie:"Digitalisierung & Transparenz", text:"Soll die Stadt Moosburg die Unterlagen zu Ã¶ffentlichen Stadtratssitzungen fÃ¼r alle zugÃ¤nglich machen?" },
      { id:"q11", kategorie:"Digitalisierung & Transparenz", text:"Soll die Stadt Moosburg die Stadtratssitzungen live streamen?" },
      { id:"q12", kategorie:"Verkehr & MobilitÃ¤t",           text:"Soll die Stadt Moosburg in der Altstadt alle bestehenden ParkflÃ¤chen erhalten?" },
      { id:"q13", kategorie:"Stadtentwicklung & Bauen",      text:"Soll die Stadt Moosburg in den kommenden 6 Jahren grundsÃ¤tzlich keine neuen Baugebiete mehr ausweisen?" },
      { id:"q14", kategorie:"Stadtentwicklung & Bauen",      text:"Soll die Stadt Moosburg mehr Baurecht schaffen, um Gewerbe und Wohnungsnot entgegenzuwirken?" },
      { id:"q15", kategorie:"Stadtentwicklung & Bauen",      text:"Soll die Stadt Moosburg bei neuen Wohnquartieren auf nachhaltige MobilitÃ¤ts- und Energiekonzepte bestehen?" },
      { id:"q16", kategorie:"Stadtentwicklung & Bauen",      text:"Soll die Asch-Wiese weiterhin unbebaut, bzw. unversiegelt bleiben?" },
      { id:"q17", kategorie:"Stadtentwicklung & Bauen",      text:"Soll die Stadt Moosburg auf Ã¶ffentlichem Grund nur im absolut notwendigen Umfang FlÃ¤che versiegeln?" },
      { id:"q18", kategorie:"Stadtentwicklung & Bauen",      text:"Soll die Stadt Moosburg neben der Erweiterung von Degernpoint weitere Gewerbegebiete schaffen?" },
      { id:"q19", kategorie:"Wirtschaft & Finanzen",         text:"Soll die Stadt Moosburg die Gewerbesteuer senken, um Unternehmen anzulocken?" },
      { id:"q20", kategorie:"Wirtschaft & Finanzen",         text:"Soll die Stadt Moosburg sich selbst durch personelle VerstÃ¤rkung an der WirtschaftsfÃ¶rderung beteiligen?" },
      { id:"q21", kategorie:"Wirtschaft & Finanzen",         text:"Soll die Stadt Moosburg die Marketing eG weiterhin federfÃ¼hrend fÃ¼r das stÃ¤dtische Marketing verantwortlich lassen?" },
      { id:"q22", kategorie:"Wirtschaft & Finanzen",         text:"Soll die Stadt Moosburg stÃ¤dtische GebÃ¼hren regelmÃ¤ÃŸig erhÃ¶hen, um den Haushalt zu entlasten?" },
      { id:"q23", kategorie:"Soziales & Bildung",            text:"Soll die Stadt Moosburg SchulwegplÃ¤ne erstellen, um die Schulwegsicherheit zu steigern?" },
      { id:"q24", kategorie:"Soziales & Bildung",            text:"Soll die Stadt Moosburg sich fÃ¼r SitzplÃ¤tze fÃ¼r alle Kinder in Schulbussen einsetzen?" },
      { id:"q25", kategorie:"Soziales & Bildung",            text:"Soll die Stadt Moosburg in Ã¶ffentlichen GebÃ¤uden kostenlose Hygiene- und Menstruationsartikel zur VerfÃ¼gung stellen?" },
      { id:"q26", kategorie:"Soziales & Bildung",            text:"Soll das Jugendparlament ein verbindliches Mitspracherecht im Stadtrat erhalten?" },
      { id:"q27", kategorie:"Kultur & Gesellschaft",         text:"Soll die Stadt Moosburg fÃ¼r den Christkindlmarkt auf dem Plan zusÃ¤tzliche Buden anschaffen?" },
      { id:"q28", kategorie:"Kultur & Gesellschaft",         text:"Soll die Stadt Moosburg MÃ¶glichkeiten fÃ¼r alternative Bestattungen schaffen?" },
      { id:"q29", kategorie:"Kultur & Gesellschaft",         text:"Soll die Stadt Moosburg sich fÃ¼r den Erhalt der Stalag-Baracken und die Schaffung eines Dokumentationszentrums einsetzen?" },
      { id:"q30", kategorie:"Kultur & Gesellschaft",         text:"Sollen am Rathaus der Stadt Moosburg andere Flaggen als nur die der Stadt Moosburg oder des Freistaates Bayern gehisst werden dÃ¼rfen, wenn der Stadtrat dies beschlieÃŸt?" },
      { id:"q31", kategorie:"Klima & Umwelt",                text:"Soll die Stadt Moosburg wieder FÃ¶rderprogramme fÃ¼r KlimaschutzmaÃŸnahmen auflegen?" },
      { id:"q32", kategorie:"Freizeit & Sport",              text:'Soll die Stadt Moosburg den verfallenen Fahrradpark als modernen \u201eDirtpark\u201c erneuern?' },
      { id:"q33", kategorie:"Stadtentwicklung & Bauen",      text:"Soll die Stadt Moosburg das BahnhofsgebÃ¤ude abreiÃŸen und durch einen kostengÃ¼nstigen Containerbau ersetzen?" },
      { id:"q34", kategorie:"Stadtentwicklung & Bauen",      text:"Soll die Stadt Moosburg sich bemÃ¼hen, das BahnhofsgebÃ¤ude wieder zu verkaufen?" },
      { id:"q35", kategorie:"Demokratie & Beteiligung",      text:"Soll die kommunale Mitbestimmung in Form von BÃ¼rgerrÃ¤ten, Umfragen und Onlinesprechstunden weiter intensiviert werden?" },
      { id:"q36", kategorie:"Verkehr & MobilitÃ¤t",           text:"Soll auf dem Plan Ã¼ber die gekennzeichneten ParkplÃ¤tze hinaus geparkt werden dÃ¼rfen?" },
    ];

    // â”€â”€â”€ PARTEIEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    const PARTEIEN = [
      {
        id:"csu", name:"CSU", farbe:"#0088CC", teilnehmend:true,
        antworten: Object.fromEntries(FRAGEN.map(f=>[f.id,null])),
        begruendungen: Object.fromEntries(FRAGEN.map(f=>[f.id,null])),
      },
      {
        id:"fw", name:"Freie WÃ¤hler", farbe:"#FF6000", teilnehmend:true,
        antworten:{q1:"ja",q2:"nein",q3:"nein",q4:"ja",q5:"nein",q6:"nein",q7:"ja",q8:"nein",q9:"ja",q10:"ja",q11:"neutral",q12:"nein",q13:"nein",q14:"ja",q15:"nein",q16:"ja",q17:"ja",q18:"ja",q19:"nein",q20:"nein",q21:"ja",q22:"ja",q23:"nein",q24:"ja",q25:"nein",q26:"ja",q27:"ja",q28:"ja",q29:"ja",q30:"nein",q31:"nein",q32:"ja",q33:"neutral",q34:"nein",q35:"ja",q36:"nein"},
        begruendungen:{q1:"Wir mÃ¶chten eine temporÃ¤re FuÃŸgÃ¤ngerzone im Bereich HerrnstraÃŸe / Stadtplatz errichten. Zur Belebung der Innenstadt dann auch MarktstÃ¤nde und Veranstaltungen in diesem Bereich.",q2:"Eine Einweg-Regelung lÃ¶st das Problem der sogenannten Eltern-Taxis nicht.",q3:null,q4:"Im Innenstadtbereich besteht ein Parksuchverkehr. Durch EinfÃ¼hrung einer digitalen LÃ¶sung wollen wir diesen reduzieren.",q5:null,q6:null,q7:"Wir wollen die auswÃ¤rtigen Kunden, die in Moosburg einkaufen oder was zu erledigen haben in unserer Stadt haben. Es gilt den Ortsdurchgangsverkehr zu reduzieren.",q8:"Wir wollen nicht mehr Verkehr Nachts und am Wochenende. Die Frage ist vermutlich missverstÃ¤ndlich.",q9:"Wir wollen einen Live-BÃ¼rgerservice etablieren.",q10:null,q11:null,q12:"Durch InfrastrukturmaÃŸnahmen Innenstadt schÃ¶ner machen, einzelne ParkplÃ¤tze verlagern.",q13:"Baugebiet ja oder nein hat direkte Auswirkung. Angebot und Nachfrage haben Auswirkungen auf die Preise am Wohnungsmarkt.",q14:null,q15:null,q16:null,q17:null,q18:null,q19:"Die Frage wÃ¼rde sich dann stellen, wenn Gewerbegebiete vorhanden sind.",q20:null,q21:null,q22:"Um keine Einrichtungen schlieÃŸen zu mÃ¼ssen, sollten die GebÃ¼hren regelmÃ¤ÃŸig, also alle 2-3 Jahre, orientiert an der Inflationsrate erhÃ¶ht werden.",q23:null,q24:null,q25:null,q26:null,q27:null,q28:null,q29:null,q30:null,q31:null,q32:"Unter Verantwortung und TrÃ¤gerschaft eines Vereins.",q33:null,q34:null,q35:null,q36:null},
      },
      {
        id:"afd", name:"AfD", farbe:"#009EE0", teilnehmend:true,
        antworten: Object.fromEntries(FRAGEN.map(f=>[f.id,null])),
        begruendungen: Object.fromEntries(FRAGEN.map(f=>[f.id,null])),
      },
      {
        id:"gruene", name:"GrÃ¼ne", farbe:"#46962B", teilnehmend:true,
        antworten:{q1:"ja",q2:"nein",q3:"ja",q4:"ja",q5:"nein",q6:"neutral",q7:"ja",q8:"ja",q9:"ja",q10:"ja",q11:"neutral",q12:"nein",q13:"nein",q14:"ja",q15:"ja",q16:"ja",q17:"ja",q18:"nein",q19:"nein",q20:"ja",q21:"neutral",q22:"neutral",q23:"ja",q24:"ja",q25:"ja",q26:"ja",q27:"nein",q28:"ja",q29:"ja",q30:"ja",q31:"ja",q32:"ja",q33:"nein",q34:"nein",q35:"ja",q36:"nein"},
        begruendungen:{q1:"Wir setzen uns ein fÃ¼r eine lebendige Innenstadt â€“ mit Verkehrsberuhigung UND AufenthaltsqualitÃ¤t. Mit Sitz- und Spielgelegenheiten, StadtbÃ¤umen, barrierefreien Wegen, mehr Platz fÃ¼r AuÃŸengastronomie und einer vielfÃ¤ltigen GeschÃ¤ftswelt schaffen wir einen attraktiven Ort zum Verweilen.",q2:"Eine zeitlich befristete Einfahrtsregelung wie in der AlbinstraÃŸe ist die effektivere MaÃŸnahme. FÃ¼r AnwohnerInnen, Pflegedienste und Lieferverkehr werden Ausnahmegenehmigungen ausgestellt.",q3:"Mit unserem Antrag wurde das letzte groÃŸe Wohngebiet in der Neustadt zur Tempo-30-Zone â€“ weitere StraÃŸen mÃ¼ssen folgen.",q4:"Ca. 30 % des innerstÃ¤dtischen Verkehrs sind Parkplatzsuchverkehr. Dieser kann durch ein digitales Parkraummanagement stark reduziert werden.",q5:"Verkehrsuntersuchungen zeigten, dass nach der Plansanierung ausreichend innenstadtnahe ParkplÃ¤tze vorhanden sind. Der Flex verbessert die Erreichbarkeit zusÃ¤tzlich.",q6:"Derzeit nicht nÃ¶tig. Allerdings sollten geltende Regelungen, z. B. Parkverbot auf FuÃŸwegen, stÃ¤rker kontrolliert werden.",q7:"Eine weitere Verkehrsreduktion in der Innenstadt schafft Aufenthalts- und LebensqualitÃ¤t. Die Innenstadt muss fuÃŸgÃ¤ngerfreundlicher gestaltet werden.",q8:"Mit der nÃ¤chsten Fortschreibung des Flex regen wir an, die Fahrtzeit an Wochenenden/Feiertagen deutlich zu verlÃ¤ngern (bis 0 oder 1 Uhr).",q9:"Im Rahmen der rechtlichen MÃ¶glichkeiten (Datenschutz) werden wir dies mÃ¶glichst schnell umsetzen.",q10:"In vielen Kommunen ist dies bereits Standard. Mit einem GrÃ¼nen BÃ¼rgermeister wird dies zeitnah eingefÃ¼hrt.",q11:null,q12:"Der eine oder andere Parkplatz in der Innenstadt sollte aufgelÃ¶st werden, um Platz fÃ¼r StadtmÃ¶blierung, BÃ¤ume und attraktive AuÃŸengastronomie zu schaffen.",q13:"Wir setzen uns fÃ¼r maÃŸvolles Wachstum ein. Baugebiete sollen nur ausgewiesen werden, wenn die Stadt zum grÃ¶ÃŸten Teil EigentÃ¼merin der FlÃ¤chen ist.",q14:"Wir brauchen Degernpoint 3 fÃ¼r Erweiterung und Ansiedlung grÃ¶ÃŸerer Gewerbebetriebe. Ein Gewerbegebiet Unterreit direkt an den Amperauen lehnen wir ab.",q15:"Nachhaltige MobilitÃ¤tsangebote (Sharing-Stationen mit E-Autos, LastenrÃ¤dern, E-Bikes, Rollern, Ã–PNV-Karten) sind wichtig fÃ¼r umweltfreundliche MobilitÃ¤t.",q16:"Mit uns gibt es keine Bebauung auf der Schloss-Asch-Wiese. Wir erhalten unsere grÃ¼ne Lunge.",q17:"FlÃ¤chenversiegelung ist eines der grÃ¶ÃŸten Umweltprobleme. Wir brauchen B-PlÃ¤ne auch zur Steuerung der Nachverdichtung.",q18:"Wir sehen die zukÃ¼nftige Gewerbeentwicklung in Degernpoint 3. Wie bei der Wohnbebauung soll dies auf stÃ¤dtischen FlÃ¤chen verwirklicht werden.",q19:"Wir setzen auf verlÃ¤ssliche Finanzpolitik, um den Stadthaushalt zu entlasten und Planungssicherheit fÃ¼r lokale Unternehmen zu gewÃ¤hrleisten.",q20:"Wir planen eine Wirtschaftseinheit direkt beim BÃ¼rgermeister â€“ bestehend aus WirtschaftsfÃ¶rderung, Marketing und Ã–ffentlichkeitsarbeit.",q21:"Zumindest eine Marketingstelle soll direkt beim BÃ¼rgermeister angesiedelt werden. In Zusammenarbeit mit der Marketing eG soll das Stadtmarketing neu aufgestellt werden.",q22:"StÃ¤dtische GebÃ¼hren sollen im Rahmen der Inflation maÃŸvoll angepasst werden, mehr nicht.",q23:"Die GrÃ¼nen haben bereits 2022 einen Antrag fÃ¼r SchulwegplÃ¤ne gestellt (durch Stadtratsmehrheit abgelehnt).",q24:"Die GrÃ¼nen hatten dies auf Kreisebene beantragt. Wir setzen uns fÃ¼r geÃ¤nderte rechtliche Rahmenbedingungen ein.",q25:"Menstruationsprodukte in Ã¶ffentlichen Toiletten fÃ¶rdern Gleichberechtigung und verhindern Nachteile durch Periodenarmut.",q26:"GrundsÃ¤tzlich muss die Zusammenarbeit mit dem Jugendparlament und die MitwirkungsmÃ¶glichkeiten verbessert werden.",q27:"Wir sehen den Christkindlmarkt am Zehentstadel gut aufgehoben. Dies spart Geld, das wir in anderen Bereichen dringend brauchen.",q28:"FÃ¼r viele Menschen ist das ein groÃŸes Anliegen, dem wir unbedingt gerecht werden mÃ¼ssen.",q29:"Eine gelebte Erinnerungskultur bewahrt uns vor den Fehlern der Vergangenheit und macht Geschichte begreifbar.",q30:"In begrÃ¼ndeten FÃ¤llen sollte dies mÃ¶glich sein.",q31:"Die Stadt muss BÃ¼rger*innen bei der Energiewende unterstÃ¼tzen. MaÃŸgeschneiderte FÃ¶rderprogramme werden mit einem grÃ¼nen BÃ¼rgermeister wieder eingefÃ¼hrt.",q32:"Der bestehende Park ist unsicher. Die Anlage ist eine sinnvolle Erweiterung des Angebots fÃ¼r viele Altersgruppen.",q33:"Eine ContainerlÃ¶sung wird dem Standort nicht gerecht. Ein saniertes GebÃ¤ude ist hochwertiger.",q34:"Mit einem Verkauf sind die Kaufkosten nicht mehr erzielbar. AuÃŸerdem gibt die Stadt dadurch HandlungsmÃ¶glichkeiten aus der Hand.",q35:"Unbedingt â€“ ein grÃ¼ner BÃ¼rgermeister wird dies einfÃ¼hren.",q36:"Es stehen ausreichend ParkplÃ¤tze in fuÃŸlÃ¤ufiger Umgebung zur VerfÃ¼gung. Die PlanflÃ¤che wird dringend fÃ¼r mehr AufenthaltsqualitÃ¤t benÃ¶tigt."},
      },
      {
        id:"spd", name:"SPD", farbe:"#E3000F", teilnehmend:true,
        antworten:{q1:"ja",q2:"neutral",q3:"ja",q4:"neutral",q5:"nein",q6:"nein",q7:"ja",q8:"ja",q9:"neutral",q10:"ja",q11:"neutral",q12:"nein",q13:"nein",q14:"ja",q15:"ja",q16:"ja",q17:"ja",q18:"ja",q19:"neutral",q20:"ja",q21:"ja",q22:"ja",q23:"ja",q24:"ja",q25:"ja",q26:"ja",q27:"neutral",q28:"ja",q29:"ja",q30:"ja",q31:"ja",q32:"ja",q33:"ja",q34:"nein",q35:"ja",q36:"nein"},
        begruendungen:{q1:"Die Innenstadt und damit das Gewerbe profitiert mehr von einem Einkaufs-Erlebnis als von einem Parkplatz direkt vor der TÃ¼r.",q2:"Ein Verkehrsversuch, wie ursprÃ¼nglich vom Bauausschuss beschlossen, wÃ¼rde belastbare Erfahrungswerte bringen. Wir sind fÃ¼r eine starke Einbeziehung der Anlieger.",q3:"Moosburg hat als gewachsene Stadt viele auch kleinere StraÃŸen. Es ist dafÃ¼r zu sorgen, dass alle Verkehrsteilnehmer sich sicher bewegen kÃ¶nnen.",q4:"Kosten und Aufwand stehen nach unserem Wissen in keinem sinnvollen VerhÃ¤ltnis zum Nutzen. Sollte der Zeitpunkt kommen, ist es als potentielle LÃ¶sung genauer zu betrachten.",q5:"Wir denken, dass im Umgriff der Westumfahrung MÃ¶glichkeiten fÃ¼r sanfte Parkraumentwicklung gegeben ist, die z. B. mit einem Shuttleservice angebunden werden kann.",q6:"Eine Parkraumbewirtschaftung kann das StadtsÃ¤ckel nicht nachhaltig fÃ¼llen. Das gelingt nur Ã¼ber eine hÃ¶here AttraktivitÃ¤t der Stadt.",q7:"Die SPD hat hierzu einen Antrag vorgelegt, der alle Verkehrsteilnehmer und ihre Bedarfe an FlÃ¤che, Infrastruktur und Sicherheit berÃ¼cksichtigt.",q8:"MobilitÃ¤t und Erreichbarkeit sind die SchlÃ¼ssel fÃ¼r sichere Teilhabe an der Gesellschaft â€“ in jedem Alter und jeder Lebenssituation.",q9:"Eine weitere Digitalisierung der Verwaltung ist wichtig. Wir sehen hier aber andere PrioritÃ¤ten, wobei Videotermine mittelfristig die logische Folge sind.",q10:"Erster Schritt sollte sein, die bereits Ã¶ffentlich verfÃ¼gbaren Unterlagen besser nutzbar zu machen.",q11:"Kosten, Nutzen und rechtliche Belange mÃ¼ssen in Einklang gebracht werden.",q12:"Die ParkplÃ¤tze in der Innenstadt sind wichtig. ABER: Man kÃ¶nnte mit kleinem Mitteleinsatz die ParkflÃ¤chen anders anordnen.",q13:"Organisches Wachstum ist fÃ¼r unsere Stadt wichtig. Aber die Vorgehensweise der Ausweisung und die Betrachtung der Nachfolgelasten mÃ¼ssen sich Ã¤ndern.",q14:"Ja, aber in vernÃ¼nftigen Bahnen. Eine gesunde Mischung aus Wohnbebauung, kleinen und mittleren Gewerbebetrieben sowie Industrie sorgt fÃ¼r einen lebendigen Stadtcharakter.",q15:"Dies sollte bei allen Vorhaben die Grundlage sein und beinhaltet, dass die Stadt das Projekt als Berater fÃ¼r private Bauherren begleitet.",q16:"Die Aschwiese ist mit ihrer Lage ein wertvolles Gut fÃ¼r die Frischluftversorgung der Stadt.",q17:"Jedes grÃ¶ÃŸere Regenereignis zeigt, dass Versiegelung nicht die LÃ¶sung sein kann. Schwammstadtkonzepte sind auf Machbarkeit zu prÃ¼fen.",q18:"Unsere Stadt hat in diesem Bereich Nachholbedarf, der sich direkt auf die Stadtfinanzen und damit die HandlungsfÃ¤higkeit auswirkt.",q19:"Diese Entscheidungen sind gemeinsam mit den Gemeinden der Region zu treffen, da uns eine gegenseitige Kannibalisierung am wenigsten nutzt.",q20:"Ein hauptamtlicher Ansprechpartner fÃ¼r bestehendes und zuziehendes Gewerbe im Rathaus ist ein unmissverstÃ¤ndliches Zeichen.",q21:"Hier ist die KlÃ¤rung des Arbeitsauftrages fÃ¼r die MoMa lÃ¤ngst Ã¼berfÃ¤llig. Wir sehen die Entwicklung in Richtung Tourismus und breitgefÃ¤chertes Veranstaltungsmarketing als Chance.",q22:"Nicht um den Haushalt zu entlasten, sondern als regelmÃ¤ÃŸige und moderate Anpassung an die wirtschaftlichen MÃ¶glichkeiten der BÃ¼rger.",q23:"Auch wenn dieses Vorhaben erst einmal Kosten verursacht â€“ der Nutzen ist insbesondere bei spÃ¤teren Planungen unbestritten.",q24:"Sicherheit geht vor. Auch wenn gesetzliche Vorgaben erfÃ¼llt sind, darf dies nicht die Grenze des Handelns sein.",q25:"Ja, denn manchmal besteht Gleichberechtigung aus kleinen Schritten, die man(n) einfach gehen sollte.",q26:"Wir haben das JUP als kompetenten Ansprechpartner kennen und schÃ¤tzen gelernt.",q27:"Wir finden beide Standorte attraktiv und sprechen uns fÃ¼r eine BÃ¼rgerbefragung aus.",q28:"Auch der letzte Gang sollte die MÃ¶glichkeit erÃ¶ffnen, mit seiner Heimatstadt verbunden zu bleiben.",q29:"Wir sehen in unserer Stadtgeschichte einen wertvollen Schatz, der touristisch gehoben werden sollte.",q30:"Das Rathaus ist Mittelpunkt und Zeichen der stÃ¤dtischen Gemeinschaft.",q31:"Klimapolitik ist gelebte Politik, von der wir alle profitieren.",q32:"Wir glauben, dass der Dirtpark an der Amper eine gute Idee ist.",q33:"Zustand und Lage des GebÃ¤udes (Bausubstanz, Asbest, NÃ¤he zum Gleis) legen nahe, den Bestand abzureiÃŸen und zu ersetzen.",q34:"Wenn wir den Bahnhof zum Mittelpunkt des Ã–PNV machen wollen, brauchen wir ihn in eigener Hand.",q35:"Eine alte Forderung der SPD. Die technischen Mittel lassen einen sinnvollen Einsatz direkter Demokratie endlich nÃ¤her rÃ¼cken.",q36:"Nein, einfach nein! Hier soll stÃ¤dtisches Leben stattfinden."},
      },
      {
        id:"fresh", name:"FRESH", farbe:"#00A878", teilnehmend:false,
        antworten: Object.fromEntries(FRAGEN.map(f=>[f.id,null])),
        begruendungen: Object.fromEntries(FRAGEN.map(f=>[f.id,null])),
      },
      {
        id:"linke", name:"LINKE", farbe:"#BE3075", teilnehmend:true,
        antworten:{q1:"ja",q2:"neutral",q3:"ja",q4:"neutral",q5:"nein",q6:"neutral",q7:"ja",q8:"neutral",q9:"ja",q10:"ja",q11:"ja",q12:"nein",q13:"ja",q14:"nein",q15:"ja",q16:"ja",q17:"ja",q18:"nein",q19:"nein",q20:"ja",q21:"nein",q22:"nein",q23:"ja",q24:"ja",q25:"ja",q26:"ja",q27:"neutral",q28:"ja",q29:"ja",q30:"ja",q31:"ja",q32:"ja",q33:"nein",q34:"nein",q35:"ja",q36:"nein"},
        begruendungen:{q1:null,q2:null,q3:null,q4:"Neutral weil man dies pauschal nicht beantworten kann. Eine gesicherte, belastbare Erhebung von Livedaten ist sehr kostenintensiv und muss auch gepflegt werden.",q5:null,q6:"GrundsÃ¤tzlich ja, aber nicht wegen dem zweifelhaften finanziellen Spielraum der hier angezweifelt werden darf.",q7:null,q8:"Nachtverkehr von was? FlÃ¼gen? ZÃ¼gen? LKWs?",q9:"Ja, wenn das Personal einverstanden, entsprechend entlohnt, ausgestattet und geschult wird.",q10:null,q11:null,q12:null,q13:null,q14:"Wenn dann nur Sozialwohnungen.",q15:null,q16:null,q17:null,q18:"Erst die vorhandenen nutzen und modernisieren, dann schauma weiter.",q19:null,q20:null,q21:null,q22:null,q23:null,q24:null,q25:null,q26:null,q27:"GrundsÃ¤tzlich ja, abhÃ¤ngig von der BÃ¼rger:innenbefragung und dem langfristigen Ziel.",q28:null,q29:null,q30:null,q31:null,q32:null,q33:null,q34:null,q35:null,q36:null},
      },
    ];

    // â”€â”€â”€ ALGORITHMUS & HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function berechneMatch(partei, nutzerAntworten, doppelt) {
      let punkte=0, max=0;
      for(const [id,a] of Object.entries(nutzerAntworten)){
        if(a==="skip") continue;
        const pa=partei.antworten[id];
        if(pa===null||pa===undefined) continue;
        const w=doppelt.has(id)?2:1;
        max+=2*w;
        if(a===pa) punkte+=2*w;
        else if(a==="neutral"||pa==="neutral") punkte+=1*w;
      }
      return max===0?null:Math.round((punkte/max)*100);
    }

    function shuffle(arr){
      const a=[...arr];
      for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}
      return a;
    }

    const ROT="#B8121E", GOLD="#C8A84B";
    const SF="'Source Sans 3',sans-serif", HF="'Libre Baskerville',Georgia,serif";
    const KAT_FARBEN={
      "Verkehr & MobilitÃ¤t":"#C0152A","Digitalisierung & Transparenz":"#7C3AED",
      "Stadtentwicklung & Bauen":"#B45309","Wirtschaft & Finanzen":"#059669",
      "Soziales & Bildung":"#DB2777","Kultur & Gesellschaft":"#EA580C",
      "Klima & Umwelt":"#16A34A","Freizeit & Sport":"#0891B2","Demokratie & Beteiligung":"#8B1A1A",
    };
    const ANT_CFG={
      ja:    {sym:"âœ“",farbe:"#16A34A",hell:"#DCFCE7",label:"Ja"},
      neutral:{sym:"â€“",farbe:"#64748B",hell:"#F1F5F9",label:"Neutral"},
      nein:  {sym:"âœ•",farbe:"#DC2626",hell:"#FEE2E2",label:"Nein"},
      skip:  {sym:"Â·",farbe:"#AAA",   hell:"#F5F5F5",label:"Ãœbersprungen"},
    };

    // â”€â”€â”€ ANTWORT ICON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function AntwortIcon({antwort,size=26}){
      const c=ANT_CFG[antwort]||{sym:"?",farbe:"#CCC",hell:"#F5F5F5"};
      return <div title={c.label} style={{width:size,height:size,borderRadius:"50%",background:c.hell,border:`2px solid ${c.farbe}`,display:"flex",alignItems:"center",justifyContent:"center",color:c.farbe,fontWeight:700,fontSize:size*0.44,fontFamily:SF,flexShrink:0}}>{c.sym}</div>;
    }

    // â”€â”€â”€ DETAIL PANEL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function DetailPanel({partei,nutzerAntworten}){
      const geordnet=FRAGEN.filter(f=>{
        const na=nutzerAntworten[f.id], pa=partei.antworten[f.id];
        return na&&na!=="skip"&&pa!==null&&pa!==undefined;
      });
      if(!geordnet.length) return (
        <div className="expand-panel" style={{padding:"16px 18px",borderTop:"1.5px solid #EDE9DF"}}>
          <p style={{fontFamily:SF,fontSize:"0.85rem",color:"#999",fontStyle:"italic"}}>Keine Antworten fÃ¼r den Vergleich verfÃ¼gbar.</p>
        </div>
      );
      return (
        <div className="expand-panel" style={{borderTop:"1.5px solid #EDE9DF"}}>
          <div style={{display:"flex",gap:18,padding:"9px 18px",background:"#F7F5F0",borderBottom:"1px solid #EDE9DF",justifyContent:"flex-end"}}>
            <div style={{display:"flex",alignItems:"center",gap:6}}>
              <div style={{width:9,height:9,borderRadius:"50%",background:partei.farbe,flexShrink:0}}/>
              <span style={{fontSize:"0.75rem",color:"#555",fontFamily:SF}}>{partei.name}</span>
            </div>
            <div style={{display:"flex",alignItems:"center",gap:6}}>
              <div style={{width:9,height:9,borderRadius:"50%",background:"#888",flexShrink:0}}/>
              <span style={{fontSize:"0.75rem",color:"#555",fontFamily:SF}}>Deine Antwort</span>
            </div>
          </div>
          {geordnet.map(frage=>{
            const pa=partei.antworten[frage.id], na=nutzerAntworten[frage.id];
            const beg=partei.begruendungen?.[frage.id];
            const kc=KAT_FARBEN[frage.kategorie]||ROT;
            const match=pa===na, teilMatch=!match&&(pa==="neutral"||na==="neutral");
            return (
              <div key={frage.id} className="detail-row" style={{padding:"12px 18px",background:match?"#F0FAF4":teilMatch?"#FFFCF0":"#fff"}}>
                <div style={{fontSize:"0.68rem",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.05em",color:kc,marginBottom:6}}>{frage.kategorie}</div>
                <div style={{display:"flex",gap:12,alignItems:"flex-start"}}>
                  <p style={{flex:1,fontFamily:SF,fontSize:"0.86rem",color:"#1A1A2E",lineHeight:1.52}}>{frage.text}</p>
                  <div style={{display:"flex",flexDirection:"column",gap:6,flexShrink:0}}>
                    <div style={{display:"flex",alignItems:"center",gap:5}}>
                      <div style={{width:8,height:8,borderRadius:"50%",background:partei.farbe,flexShrink:0}}/>
                      <AntwortIcon antwort={pa} size={26}/>
                    </div>
                    <div style={{display:"flex",alignItems:"center",gap:5}}>
                      <div style={{width:8,height:8,borderRadius:"50%",background:"#888",flexShrink:0}}/>
                      <AntwortIcon antwort={na} size={26}/>
                    </div>
                  </div>
                </div>
                {beg
                  ? <div style={{marginTop:8,background:"#F5F2EB",borderLeft:`3px solid ${partei.farbe}`,borderRadius:"0 6px 6px 0",padding:"7px 10px"}}><p style={{fontFamily:SF,fontSize:"0.8rem",color:"#444",lineHeight:1.55,fontStyle:"italic"}}>{beg}</p></div>
                  : <p style={{marginTop:5,fontFamily:SF,fontSize:"0.77rem",color:"#BBB",fontStyle:"italic"}}>Keine BegrÃ¼ndung eingereicht.</p>
                }
              </div>
            );
          })}
        </div>
      );
    }

    // â”€â”€â”€ INFO POPUP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function InfoPopup({onClose}){
      const beteiligte=[
        {name:"Benedict Aria Gruber",rolle:"Digitalisierungsreferent, StR Â· FRESH"},
        {name:"Philipp Fincke",      rolle:"StR Â· FDP / parteilos"},
        {name:"Kilian Linz",         rolle:"StR Â· GrÃ¼ne"},
        {name:"Stefan John",         rolle:"StR a.D. Â· Linke"},
      ];
      return (
        <div className="overlay" onClick={onClose} style={{position:"fixed",inset:0,background:"rgba(15,5,5,0.6)",zIndex:1000,display:"flex",alignItems:"center",justifyContent:"center",padding:20}}>
          <div className="popup-modal" onClick={e=>e.stopPropagation()} style={{background:"#FFFDF7",borderRadius:18,maxWidth:500,width:"100%",padding:"30px 28px",boxShadow:"0 24px 64px rgba(0,0,0,0.3)",border:`2px solid ${GOLD}55`,fontFamily:SF,maxHeight:"90vh",overflowY:"auto"}}>
            <div style={{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16}}>
              <h2 style={{fontFamily:HF,color:ROT,fontSize:"1.4rem",lineHeight:1.2}}>Ãœber dieses Projekt</h2>
              <button onClick={onClose} style={{background:"none",border:"none",fontSize:"1.6rem",cursor:"pointer",color:"#AAA",lineHeight:1}}>Ã—</button>
            </div>
            <p style={{fontSize:"0.93rem",color:"#333",lineHeight:1.72,marginBottom:16}}>
              Der <strong>WahlKompass Moosburg</strong> ist ein Ã¼berparteiliches und ehrenamtliches Projekt. Es soll BÃ¼rgerinnen und BÃ¼rgern helfen, sich zur Kommunalwahl in Moosburg a.d. Isar zu orientieren.
            </p>
            <div style={{background:"#FFF8E6",border:`1.5px solid ${GOLD}`,borderRadius:10,padding:"12px 16px",marginBottom:18}}>
              <p style={{fontSize:"0.88rem",color:"#7A5F00",fontWeight:700,marginBottom:5}}>âš ï¸ Keine Wahlempfehlung</p>
              <p style={{fontSize:"0.85rem",color:"#5A4500",lineHeight:1.65}}>Dieses Tool stellt ausdrÃ¼cklich <strong>keine Wahlempfehlung</strong> dar. Es soll die eigene Meinungsbildung unterstÃ¼tzen, nicht ersetzen. FÃ¼r die Inhalte der Parteiantworten sind ausschlieÃŸlich die jeweiligen Parteien selbst verantwortlich.</p>
            </div>
            <p style={{fontSize:"0.78rem",color:"#999",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.07em",marginBottom:10}}>Ehrenamtlich beteiligt</p>
            <div style={{display:"flex",flexDirection:"column",gap:7,marginBottom:22}}>
              {beteiligte.map(p=>(
                <div key={p.name} style={{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"9px 12px",background:"#F5F2EB",borderRadius:9,gap:12}}>
                  <span style={{fontWeight:700,color:"#1A1A2E",fontSize:"0.9rem"}}>{p.name}</span>
                  <span style={{color:"#777",fontSize:"0.78rem",textAlign:"right",lineHeight:1.3}}>{p.rolle}</span>
                </div>
              ))}
            </div>
            <button onClick={onClose} className="btn-primary" style={{width:"100%",background:ROT,color:"#fff",border:"none",borderRadius:10,padding:"12px",fontSize:"0.95rem",fontFamily:SF,fontWeight:700,cursor:"pointer"}}>SchlieÃŸen</button>
          </div>
        </div>
      );
    }

    // â”€â”€â”€ WELCOME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function WelcomeScreen({onStart,onInfo}){
      return (
        <div style={{minHeight:"100vh",background:"#F5F2EB",display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"40px 16px 48px",fontFamily:SF}}>
          <div style={{maxWidth:560,width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:20}}>
            <div className="fu fu1" style={{background:`${ROT}18`,color:ROT,border:`1px solid ${ROT}35`,borderRadius:99,padding:"6px 16px",fontSize:"0.85rem",fontWeight:600}}>ğŸ“ Moosburg a.d. Isar</div>
            <h1 className="fu fu2" style={{fontFamily:HF,fontSize:"clamp(2.4rem,8vw,3.6rem)",color:ROT,textAlign:"center",lineHeight:1.15,letterSpacing:"-0.02em"}}>Wahl<span style={{color:GOLD}}>Kompass</span></h1>
            <p className="fu fu3" style={{color:"#444",fontSize:"1.05rem",textAlign:"center",lineHeight:1.65}}>Kommunalwahl Moosburg Â· Finde heraus, welche Partei<br/>deinen Ansichten am nÃ¤chsten steht.</p>
            <div className="fu fu3" style={{display:"flex",gap:14,flexWrap:"wrap",justifyContent:"center"}}>
              {[["36","Fragen"],["7","Parteien"],["~10","Minuten"]].map(([z,l])=>(
                <div key={l} style={{display:"flex",flexDirection:"column",alignItems:"center",gap:2,background:"#fff",border:"1.5px solid #E5E0D5",borderRadius:12,padding:"14px 22px",minWidth:90}}>
                  <span style={{fontFamily:HF,fontSize:"1.8rem",color:ROT,fontWeight:700}}>{z}</span>
                  <span style={{fontSize:"0.78rem",color:"#777",textTransform:"uppercase",letterSpacing:"0.07em"}}>{l}</span>
                </div>
              ))}
            </div>
            <div className="fu fu3" style={{background:"#fff",border:"1.5px solid #E5E0D5",borderRadius:14,padding:"16px 22px",maxWidth:480,width:"100%"}}>
              <p style={{color:"#555",fontSize:"0.93rem",lineHeight:1.68,textAlign:"center"}}>Die Fragen erscheinen in <strong>zufÃ¤lliger Reihenfolge</strong>. Antworte mit <strong>Ja</strong>, <strong>Neutral</strong> oder <strong>Nein</strong>, oder Ã¼berspringe eine Frage. Am Ende kannst du wichtige Themen <strong>doppelt gewichten</strong>.</p>
            </div>
            <button className="fu fu4 btn-primary" onClick={onStart} style={{background:ROT,color:"#fff",border:"none",borderRadius:12,padding:"15px 38px",fontSize:"1.05rem",fontFamily:SF,fontWeight:700,cursor:"pointer",boxShadow:`0 4px 20px ${ROT}40`}}>Jetzt starten â†’</button>
            <button className="fu fu5 btn-ghost" onClick={onInfo} style={{background:"transparent",border:"1.5px solid #C8C2B4",borderRadius:99,padding:"7px 20px",fontSize:"0.85rem",color:"#666",cursor:"pointer",fontFamily:SF}}>â„¹ï¸ Ãœber dieses Projekt</button>
            <p className="fu fu5" style={{fontSize:"0.78rem",color:"#AAA",textAlign:"center"}}>Keine Daten werden gespeichert Â· Alles lÃ¤uft lokal in deinem Browser</p>
          </div>
        </div>
      );
    }

    // â”€â”€â”€ QUIZ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function QuizScreen({frage,idx,gesamt,onAntwort,aktAntwort,onZurueck}){
      const kc=KAT_FARBEN[frage.kategorie]||ROT;
      const fortschritt=(idx/gesamt)*100;
      return (
        <div style={{height:"100vh",display:"flex",flexDirection:"column",background:"#F5F2EB",fontFamily:SF}}>
          <div style={{flex:1,overflowY:"auto",display:"flex",justifyContent:"center",padding:"20px 16px 12px"}}>
            <div style={{maxWidth:580,width:"100%",display:"flex",flexDirection:"column",gap:16}}>
              <div style={{display:"flex",alignItems:"center",gap:12}}>
                <div style={{flex:1,height:6,background:"#E5E0D5",borderRadius:99,overflow:"hidden"}}>
                  <div style={{height:"100%",width:`${fortschritt}%`,background:GOLD,borderRadius:99,transition:"width 0.4s ease"}}/>
                </div>
                <span style={{fontSize:"0.85rem",color:"#888",minWidth:50,textAlign:"right"}}>{idx+1} / {gesamt}</span>
              </div>
              <div style={{padding:"4px 12px",borderRadius:99,fontSize:"0.74rem",fontWeight:700,letterSpacing:"0.05em",background:kc+"18",color:kc,border:`1px solid ${kc}40`,alignSelf:"flex-start",textTransform:"uppercase"}}>{frage.kategorie}</div>
              <div key={frage.id} style={{background:"#fff",borderRadius:16,padding:"26px",border:"1.5px solid #E5E0D5",boxShadow:"0 2px 16px rgba(0,0,0,0.05)",animation:"fadeUp 0.35s ease both"}}>
                <p style={{fontFamily:HF,fontSize:"clamp(1.05rem,3.5vw,1.22rem)",color:"#1A1A2E",lineHeight:1.58}}>{frage.text}</p>
              </div>
            </div>
          </div>
          <div style={{background:"#F5F2EB",borderTop:"1.5px solid #E5E0D5",padding:"12px 16px 18px",display:"flex",justifyContent:"center",flexShrink:0}}>
            <div style={{maxWidth:580,width:"100%",display:"flex",flexDirection:"column",gap:9}}>
              <div style={{display:"flex",gap:10}}>
                {[{label:"Ja",sym:"âœ“",farbe:"#16A34A",hell:"#DCFCE7",val:"ja"},{label:"Neutral",sym:"â€“",farbe:"#64748B",hell:"#F1F5F9",val:"neutral"},{label:"Nein",sym:"âœ•",farbe:"#DC2626",hell:"#FEE2E2",val:"nein"}].map(({label,sym,farbe,hell,val})=>{
                  const aktiv=aktAntwort===val;
                  return <button key={val} className="btn-answer" onClick={()=>onAntwort(val)} style={{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:4,padding:"13px 8px",borderRadius:12,border:`2px solid ${farbe}`,background:aktiv?farbe:hell,color:aktiv?"#fff":farbe,fontFamily:SF,fontSize:"0.9rem",fontWeight:aktiv?700:600,boxShadow:aktiv?`0 4px 16px ${farbe}44`:"none"}}><span style={{fontSize:"1.15rem"}}>{sym}</span><span>{label}</span></button>;
                })}
              </div>
              <div style={{display:"flex",gap:8}}>
                {idx>0&&<button className="btn-ghost" onClick={onZurueck} style={{flex:1,background:"#EDEAE2",border:"none",borderRadius:10,padding:"9px",fontFamily:SF,fontSize:"0.88rem",color:"#555",cursor:"pointer"}}>â† ZurÃ¼ck</button>}
                <button className="btn-ghost" onClick={()=>onAntwort("skip")} style={{flex:1,background:"#EDEAE2",border:"none",borderRadius:10,padding:"9px",fontFamily:SF,fontSize:"0.88rem",color:"#555",cursor:"pointer"}}>Ãœberspringen â†’</button>
              </div>
            </div>
          </div>
        </div>
      );
    }

    // â”€â”€â”€ GEWICHTUNG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function GewichtungScreen({fragen,doppelt,onToggle,onWeiter,onZurueck,beantw}){
      return (
        <div style={{minHeight:"100vh",background:"#F5F2EB",display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"28px 16px 48px",fontFamily:SF}}>
          <div style={{maxWidth:600,width:"100%",display:"flex",flexDirection:"column",gap:16}}>
            <h2 style={{fontFamily:HF,fontSize:"clamp(1.5rem,5vw,2rem)",color:ROT,letterSpacing:"-0.02em"}}>Doppelte Gewichtung</h2>
            <p style={{color:"#555",fontSize:"0.95rem",lineHeight:1.62}}>Du hast <strong>{beantw} Fragen</strong> beantwortet. WÃ¤hle Fragen, die dir besonders wichtig sind â€” sie flieÃŸen <strong>doppelt</strong> ins Ergebnis ein.</p>
            {doppelt.size>0&&<div style={{background:"#FFF8E6",border:`1.5px solid ${GOLD}`,borderRadius:10,padding:"10px 16px",fontSize:"0.9rem",color:"#7A5F00"}}>âš–ï¸ <strong>{doppelt.size}</strong> {doppelt.size===1?"Frage":"Fragen"} doppelt gewichtet</div>}
            <div style={{display:"flex",flexDirection:"column",gap:8,maxHeight:"50vh",overflowY:"auto",paddingRight:4}}>
              {fragen.map(f=>{
                const aktiv=doppelt.has(f.id), kc=KAT_FARBEN[f.kategorie]||ROT;
                return (
                  <div key={f.id} className="gewicht-item" onClick={()=>onToggle(f.id)} style={{display:"flex",alignItems:"center",gap:12,padding:"11px 14px",borderRadius:12,background:aktiv?"#FFF8E6":"#FAFAF8",border:`2px solid ${aktiv?GOLD:"#E5E0D5"}`,boxShadow:aktiv?`0 2px 12px ${GOLD}33`:"none"}}>
                    <div style={{flex:1}}>
                      <span style={{fontSize:"0.71rem",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.06em",color:kc,display:"block",marginBottom:3}}>{f.kategorie}</span>
                      <p style={{fontSize:"0.87rem",color:"#333",lineHeight:1.4}}>{f.text}</p>
                    </div>
                    <div style={{minWidth:36,height:36,borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.8rem",background:aktiv?GOLD:"#E5E0D5",color:aktiv?"#fff":"#888",flexShrink:0}}>{aktiv?"Ã—2":"Ã—1"}</div>
                  </div>
                );
              })}
            </div>
            <div style={{display:"flex",gap:10}}>
              <button className="btn-ghost" onClick={onZurueck} style={{background:"#EDEAE2",border:"none",borderRadius:10,padding:"12px 20px",fontSize:"0.9rem",color:"#555",cursor:"pointer",fontFamily:SF}}>â† ZurÃ¼ck</button>
              <button className="btn-primary" onClick={onWeiter} style={{flex:1,background:ROT,color:"#fff",border:"none",borderRadius:12,padding:"12px 20px",fontSize:"1rem",fontFamily:SF,fontWeight:700,cursor:"pointer",boxShadow:`0 4px 16px ${ROT}35`}}>Ergebnis anzeigen â†’</button>
            </div>
          </div>
        </div>
      );
    }

    // â”€â”€â”€ ERGEBNISSE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function ErgebnisseScreen({ergebnisse,nutzerAntworten,onNeustart,doppeltAnz,beantw}){
      const [expandedId,setExpandedId]=useState(null);
      const maxMatch=ergebnisse.reduce((m,p)=>(p.match!==null&&p.match>m?p.match:m),0);
      return (
        <div style={{minHeight:"100vh",background:"#F5F2EB",display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"28px 16px 48px",fontFamily:SF}}>
          <div style={{maxWidth:600,width:"100%",display:"flex",flexDirection:"column",gap:12}}>
            <h2 style={{fontFamily:HF,fontSize:"clamp(1.5rem,5vw,2rem)",color:ROT,letterSpacing:"-0.02em"}}>Dein Ergebnis</h2>
            <p style={{color:"#666",fontSize:"0.93rem"}}>{beantw} beantwortete Fragen{doppeltAnz>0?` Â· ${doppeltAnz} doppelt gewichtet`:""} Â· <em>Tippe auf eine Partei fÃ¼r Details</em></p>
            {ergebnisse.map((p,i)=>{
              const isOpen=expandedId===p.id;
              return (
                <div key={p.id} className="ergebnis-karte" style={{background:"#fff",border:`1.5px solid ${isOpen?p.farbe+"90":"#E5E0D5"}`,borderRadius:14,boxShadow:isOpen?`0 4px 20px ${p.farbe}22`:"0 2px 8px rgba(0,0,0,0.04)",animationDelay:`${i*0.07}s`,opacity:p.teilnehmend?1:0.55,overflow:"hidden",transition:"border-color 0.2s,box-shadow 0.2s"}}>
                  <div className="karte-header" onClick={()=>p.teilnehmend&&setExpandedId(isOpen?null:p.id)} style={{padding:"16px 18px",background:isOpen?p.farbe+"08":"#fff",transition:"background 0.2s"}}>
                    <div style={{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10}}>
                      <div style={{display:"flex",alignItems:"center",gap:9,flexWrap:"wrap"}}>
                        <div style={{width:11,height:11,borderRadius:"50%",background:p.farbe,flexShrink:0}}/>
                        <span style={{fontFamily:HF,fontSize:"1rem",color:"#1A1A2E",fontWeight:700}}>{p.name}</span>
                        {!p.teilnehmend&&<span style={{background:"#F3F3F3",color:"#888",fontSize:"0.72rem",fontWeight:700,padding:"3px 9px",borderRadius:99,border:"1px solid #DDD"}}>Nicht teilgenommen</span>}
                      </div>
                      <div style={{display:"flex",alignItems:"center",gap:10}}>
                        {p.match!==null?<span style={{fontFamily:HF,fontSize:"1.3rem",fontWeight:700,color:p.match>=60?"#16A34A":p.match>=40?"#B45309":"#DC2626"}}>{p.match} %</span>:<span style={{color:"#CCC",fontSize:"1.2rem",fontFamily:HF}}>â€“</span>}
                        {p.teilnehmend&&<span style={{color:"#AAA",fontSize:"1rem",display:"inline-block",transform:isOpen?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.25s"}}>â–¾</span>}
                      </div>
                    </div>
                    <div style={{height:8,background:"#F0EDE4",borderRadius:99,overflow:"hidden",marginBottom:6}}>
                      {p.match!==null?<div className="bar-fill" style={{height:"100%",width:`${p.match}%`,background:p.farbe,borderRadius:99,animationDelay:`${i*0.07+0.2}s`}}/>:<div style={{height:"100%",width:"100%",background:"#E5E0D5",borderRadius:99}}/>}
                    </div>
                    {p.match===null&&<p style={{fontSize:"0.8rem",color:"#999",fontStyle:"italic",lineHeight:1.5,marginTop:4}}>âš ï¸ Diese Partei hat ihre Antworten nicht fristgerecht eingereicht. Eine Ãœbereinstimmung kann nicht berechnet werden.</p>}
                    {p.match===maxMatch&&p.match!==null&&<div style={{marginTop:8,background:"#FFFBEB",border:`1px solid ${GOLD}`,borderRadius:8,padding:"5px 12px",fontSize:"0.82rem",color:"#7A5F00",fontWeight:700,display:"inline-block"}}>ğŸ† Beste Ãœbereinstimmung</div>}
                  </div>
                  {isOpen&&<DetailPanel partei={p} nutzerAntworten={nutzerAntworten}/>}
                </div>
              );
            })}
            <div style={{display:"flex",justifyContent:"center",marginTop:6}}>
              <button className="btn-primary" onClick={onNeustart} style={{background:ROT,color:"#fff",border:"none",borderRadius:12,padding:"13px 32px",fontSize:"1rem",fontFamily:SF,fontWeight:700,cursor:"pointer",boxShadow:`0 4px 16px ${ROT}35`}}>â†º Neu starten</button>
            </div>
            <p style={{fontSize:"0.78rem",color:"#AAA",textAlign:"center",paddingBottom:8}}>Ãœberparteiliches, ehrenamtliches Informationsprojekt Â· Keine Wahlempfehlung</p>
          </div>
        </div>
      );
    }

    // â”€â”€â”€ APP ROOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    function App(){
      const [screen,setScreen]=useState("welcome");
      const [shuffled]=useState(()=>shuffle(FRAGEN));
      const [idx,setIdx]=useState(0);
      const [antworten,setAntw]=useState({});
      const [doppelt,setDoppelt]=useState(new Set());
      const [popup,setPopup]=useState(false);

      const frage=shuffled[idx], gesamt=shuffled.length;
      const beantw=Object.values(antworten).filter(a=>a!=="skip").length;

      const gibAntwort=useCallback((a)=>{
        setAntw(prev=>({...prev,[frage.id]:a}));
        if(idx<gesamt-1) setIdx(i=>i+1); else setScreen("gewichtung");
      },[frage,idx,gesamt]);

      const toggleDoppelt=id=>setDoppelt(prev=>{const s=new Set(prev);s.has(id)?s.delete(id):s.add(id);return s;});

      const ergebnisse=useMemo(()=>{
        if(screen!=="ergebnisse") return [];
        return PARTEIEN.map(p=>({...p,match:p.teilnehmend?berechneMatch(p,antworten,doppelt):null}))
          .sort((a,b)=>{if(a.match===null&&b.match===null)return 0;if(a.match===null)return 1;if(b.match===null)return -1;return b.match-a.match;});
      },[screen,antworten,doppelt]);

      const beantwFragen=useMemo(()=>shuffled.filter(f=>antworten[f.id]&&antworten[f.id]!=="skip"),[shuffled,antworten]);
      const neustart=()=>{setAntw({});setDoppelt(new Set());setIdx(0);setScreen("welcome");};

      return (
        <>
          {popup&&<InfoPopup onClose={()=>setPopup(false)}/>}
          {screen==="welcome"    &&<WelcomeScreen onStart={()=>setScreen("quiz")} onInfo={()=>setPopup(true)}/>}
          {screen==="quiz"       &&<QuizScreen frage={frage} idx={idx} gesamt={gesamt} onAntwort={gibAntwort} aktAntwort={antworten[frage?.id]} onZurueck={()=>idx>0&&setIdx(i=>i-1)}/>}
          {screen==="gewichtung" &&<GewichtungScreen fragen={beantwFragen} doppelt={doppelt} onToggle={toggleDoppelt} onWeiter={()=>setScreen("ergebnisse")} onZurueck={()=>{setIdx(gesamt-1);setScreen("quiz");}} beantw={beantw}/>}
          {screen==="ergebnisse" &&<ErgebnisseScreen ergebnisse={ergebnisse} nutzerAntworten={antworten} onNeustart={neustart} doppeltAnz={doppelt.size} beantw={beantw}/>}
        </>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
  </script>
</body>
</html>
